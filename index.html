<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For Llyan</title>
    <style>
        /* --- Reset & Base Styles --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            cursor: none; /* Hide default cursor for desktop */
        }

        /* Show default cursor on mobile/touch devices */
        @media (hover: none) and (pointer: coarse) {
            * {
                cursor: auto;
            }
            .custom-cursor, .cursor-particle {
                display: none !important;
            }
        }

        body, html {
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            color: white;
        }

        /* --- Darker & Saturated Gradient Background --- */
        .background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(-45deg, #FF416C, #FF4B2B, #DA22FF, #9733EE);
            background-size: 400% 400%;
            animation: gradientMove 15s ease infinite;
            z-index: -2;
        }

        @keyframes gradientMove {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* --- Floating Hearts Background (Fixed) --- */
        .floating-heart {
            position: fixed;
            /* Start below the screen */
            bottom: -20%; 
            background: rgba(255, 255, 255, 0.3); /* Increased visibility */
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.3); /* Added Glow */
            clip-path: path('M50 88.9L43.5 82.9C19.2 60.7 3.3 46.1 3.3 28.3C3.3 13.7 14.8 2.2 29.4 2.2C37.7 2.2 45.6 6.1 50 12.3C54.4 6.1 62.3 2.2 70.6 2.2C85.2 2.2 96.7 13.7 96.7 28.3C96.7 46.1 80.8 60.7 56.5 82.9L50 88.9Z');
            pointer-events: none;
            z-index: -1; /* Middle Layer */
            animation: floatUp linear infinite;
        }

        @keyframes floatUp {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.2;
            }
            90% {
                opacity: 0.2;
            }
            100% {
                /* Move past the top of the screen */
                transform: translateY(-150vh) rotate(20deg);
                opacity: 0;
            }
        }

        /* --- The Hand (Feature) --- */
        .hand-emoji {
            position: fixed;
            font-size: 80px;
            z-index: 99999;
            pointer-events: none;
            filter: drop-shadow(0 10px 10px rgba(0,0,0,0.5));
            transition: left 1s ease-in-out;
            will-change: left;
        }

        /* --- Custom Cursor --- */
        .custom-cursor {
            position: fixed;
            width: 20px;
            height: 20px;
            background: white;
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z'/%3E%3C/svg%3E");
            -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z'/%3E%3C/svg%3E");
            mask-size: cover;
            -webkit-mask-size: cover;
            pointer-events: none;
            z-index: 99998;
            transform: translate(-50%, -50%);
            transition: width 0.2s, height 0.2s;
        }

        .cursor-particle {
            position: fixed;
            pointer-events: none;
            background: rgba(255, 255, 255, 0.7);
            width: 8px;
            height: 8px;
            border-radius: 50%;
            z-index: 99997;
            transform: translate(-50%, -50%);
            animation: particleFade 0.8s ease-out forwards;
        }

        @keyframes particleFade {
            0% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            100% { opacity: 0; transform: translate(-50%, -100%) scale(0); }
        }

        /* --- Parallax Container --- */
        .parallax-wrapper {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            transition: transform 0.1s ease-out;
            will-change: transform;
            z-index: 10;
        }

        /* --- Cinematic Text Section --- */
        #intro-container {
            text-align: center;
            padding: 20px;
            max-width: 800px;
            opacity: 1; 
            transition: opacity 1s ease;
        }

        .cinematic-text {
            font-size: 2.5rem;
            font-weight: 700;
            line-height: 1.4;
            opacity: 0;
            filter: blur(10px);
            transform: scale(0.95);
            transition: opacity 1.5s ease, filter 1.5s ease, transform 1.5s ease;
            text-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .cinematic-text.visible {
            opacity: 1;
            filter: blur(0);
            transform: scale(1);
        }

        /* --- Question Card --- */
        #question-card {
            display: none;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            padding: 3rem 2rem;
            border-radius: 30px;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.3);
            text-align: center;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
            animation: popIn 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
        }

        @keyframes popIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }

        .question-text {
            font-size: 2rem;
            font-weight: 900;
            color: #fff;
            text-shadow: 0 2px 5px rgba(0,0,0,0.2);
            margin-bottom: 0.5rem;
        }

        .taunt-text {
            font-size: 1.1rem;
            font-weight: 600;
            font-style: italic;
            color: #ffeaa7;
            text-shadow: 0 1px 3px rgba(0,0,0,0.2);
            height: 1.5rem;
            transition: opacity 0.3s ease;
        }

        /* --- Button Layout System --- */
        .buttons-container {
            position: relative; 
            width: 350px; 
            height: 60px; 
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .btn {
            padding: 12px 35px;
            font-size: 1.2rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            min-width: 100px;
            height: 50px; 
            z-index: 10;
            display: flex;
            justify-content: center;
            align-items: center;
            box-sizing: border-box;
            white-space: nowrap;
        }

        /* Yes Button */
        .btn-yes {
            background: #fff;
            color: #d63031;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            position: absolute;
            top: 50%;
            left: 50%;
            margin-left: -80px; 
            margin-top: -25px; 
            transform: translate(-20px, 0); 
            transition: transform 0.2s, background 0.3s, box-shadow 0.3s;
        }

        .btn-yes:hover {
            transform: translate(-20px, 0) scale(1.1);
            background: #fdfdfd;
        }

        /* No Button */
        .btn-no {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255,255,255,0.5);
            position: absolute;
            top: 50%;
            left: 50%;
            margin-left: 20px; 
            margin-top: -25px; 
            transition: top 0.3s ease, left 0.3s ease, background 0.3s, border 0.3s;
            z-index: 9999;
        }

        .btn-no:hover {
            background: rgba(255, 255, 255, 0.4);
        }

        /* --- Success Message --- */
        #success-message {
            display: none;
            text-align: center;
            animation: popIn 0.8s ease;
            position: absolute;
        }

        #success-message h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            text-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .heart-emoji {
            display: inline-block;
            animation: heartbeat 1.5s infinite;
        }

        @keyframes heartbeat {
            0% { transform: scale(1); }
            25% { transform: scale(1.2); }
            50% { transform: scale(1); }
            75% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        /* --- Heart Ripple Effect --- */
        .heart-ripple {
            position: fixed;
            width: 100px;
            height: 100px;
            background: rgba(255, 255, 255, 0.4);
            clip-path: path('M50 88.9L43.5 82.9C19.2 60.7 3.3 46.1 3.3 28.3C3.3 13.7 14.8 2.2 29.4 2.2C37.7 2.2 45.6 6.1 50 12.3C54.4 6.1 62.3 2.2 70.6 2.2C85.2 2.2 96.7 13.7 96.7 28.3C96.7 46.1 80.8 60.7 56.5 82.9L50 88.9Z');
            pointer-events: none; 
            transform: translate(-50%, -50%) scale(0);
            animation: rippleAnim 0.8s ease-out forwards;
            z-index: 9999;
        }

        @keyframes rippleAnim {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 0.8; }
            100% { transform: translate(-50%, -50%) scale(15); opacity: 0; }
        }

        /* --- Mobile Responsiveness --- */
        @media (max-width: 600px) {
            .cinematic-text { font-size: 1.8rem; }
            #question-card { width: 90%; padding: 2rem; }
            .question-text { font-size: 1.5rem; }
            
            .buttons-container {
                width: 200px;
                height: 120px;
            }
            .btn-yes {
                top: 0;
                left: 50%;
                margin-left: -60px; 
                margin-top: 0;
                transform: none;
            }
            .btn-yes:hover { transform: scale(1.1); }
            
            .btn-no {
                top: auto;
                bottom: 0;
                left: 50%;
                margin-left: -60px; 
                margin-top: 0;
            }
        }
    </style>
</head>
<body>

    <!-- Layer 1: Background Gradient -->
    <div class="background"></div>

    <!-- Layer 2: Massive Floating Hearts (Updated) -->
    <div class="floating-heart" style="left: 10%; width: 350px; height: 350px; animation-duration: 18s; animation-delay: 0s;"></div>
    <div class="floating-heart" style="left: 30%; width: 450px; height: 450px; animation-duration: 22s; animation-delay: 5s;"></div>
    <div class="floating-heart" style="left: 70%; width: 280px; height: 280px; animation-duration: 20s; animation-delay: 2s;"></div>
    <div class="floating-heart" style="left: 50%; width: 400px; height: 400px; animation-duration: 25s; animation-delay: 8s;"></div>
    <div class="floating-heart" style="left: 90%; width: 320px; height: 320px; animation-duration: 17s; animation-delay: 1s;"></div>
    <div class="floating-heart" style="left: 20%; width: 220px; height: 220px; animation-duration: 28s; animation-delay: 11s;"></div>
    <div class="floating-heart" style="left: 80%; width: 380px; height: 380px; animation-duration: 19s; animation-delay: 6s;"></div>

    <!-- Custom Cursor Element -->
    <div class="custom-cursor" id="cursor"></div>

    <!-- Layer 3: Main Content -->
    <div class="parallax-wrapper" id="parallax">
        <div id="intro-container">
            <h1 id="text-display" class="cinematic-text"></h1>
        </div>

        <section id="question-card">
            <div class="question-text">Will you be my valentine? üíó</div>
            <div class="taunt-text" id="taunt-text"></div>
            <div class="buttons-container">
                <button class="btn btn-yes" id="yes-btn">Yes</button>
                <button class="btn btn-no" id="no-btn">No</button>
            </div>
        </section>

        <div id="success-message">
            <h1>Yippee, I love you so much baby! <span class="heart-emoji">‚ù§Ô∏è</span></h1>
        </div>
    </div>

    <script>
        const scriptLines = [
            "Hi, Yan üòö",
            "I was supposed to send this to you before our recent date",
            "But I didn't finish coding this in time",
            "So like, kever",
            "Anyway...",
            "Even though we've only been for like almost 2 months",
            "It honestly feels like a year already",
            "I might have some lapses, and we might have some fights here and there",
            "But it didn't stop us from loving each other",
            "And of course, you still accepted me for who I am",
            "In fact, I could say it only made me love you even more",
            "With that being said..."
        ];

        const tauntMessages = [
            "Waraef...",
            "I-click ang yes oi...!!!",
            "PAKYU",
            "gng i'm crine ü•Ä",
            "WHAT DO U MEAN UR GONNA CLICK NO ‚ÅâÔ∏è",
            "You know you want to üòù",
            "HOY PAG YES NA KUNO",
            "No is not an answer..."
        ];

        const textDisplay = document.getElementById('text-display');
        const introContainer = document.getElementById('intro-container');
        const questionCard = document.getElementById('question-card');
        const successMessage = document.getElementById('success-message');
        const yesBtn = document.getElementById('yes-btn');
        const noBtn = document.getElementById('no-btn');
        const parallax = document.getElementById('parallax');
        const tauntText = document.getElementById('taunt-text');
        const cursor = document.getElementById('cursor');

        // --- 1. Custom Cursor Logic ---
        let mouseX = 0;
        let mouseY = 0;
        let isMoving = false;
        let particleInterval;

        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;

            // Move cursor immediately
            cursor.style.left = `${mouseX}px`;
            cursor.style.top = `${mouseY}px`;

            // Create particle trail
            createParticle(mouseX, mouseY);
        });

        function createParticle(x, y) {
            const particle = document.createElement('div');
            particle.classList.add('cursor-particle');
            
            const randomX = (Math.random() - 0.5) * 10;
            const randomY = (Math.random() - 0.5) * 10;

            particle.style.left = `${x + randomX}px`;
            particle.style.top = `${y + randomY}px`;
            
            document.body.appendChild(particle);

            setTimeout(() => {
                particle.remove();
            }, 800);
        }

        // --- 2. Gyroscope Parallax (Mobile) ---
        function initGyro() {
            if (typeof DeviceOrientationEvent !== 'undefined' && typeof DeviceOrientationEvent.requestPermission === 'function') {
                DeviceOrientationEvent.requestPermission()
                    .then(response => {
                        if (response === 'granted') {
                            window.addEventListener('deviceorientation', handleOrientation);
                        }
                    })
                    .catch(console.error);
            } else {
                window.addEventListener('deviceorientation', handleOrientation);
            }
        }

        function handleOrientation(event) {
            const x = event.gamma; 
            const y = event.beta;  

            const moveX = x / 3; 
            const moveY = (y - 45) / 3; 

            parallax.style.transform = `translateX(${-moveX}px) translateY(${-moveY}px)`;
        }

        document.addEventListener('mousemove', (e) => {
            if (window.matchMedia("(hover: hover)").matches) {
                const x = (window.innerWidth - e.pageX * 2) / 100;
                const y = (window.innerHeight - e.pageY * 2) / 100;
                parallax.style.transform = `translateX(${x}px) translateY(${y}px)`;
            }
        });

        // --- 3. Click-to-Skip Logic & Gyro Init ---
        let skipWait = () => {}; 
        
        introContainer.addEventListener('click', () => {
            initGyro();
            skipWait();
        });

        async function playIntro() {
            const getDuration = (text) => Math.max(2000, text.length * 80);

            for (let line of scriptLines) {
                textDisplay.innerText = line;
                textDisplay.classList.add('visible');
                
                await new Promise(r => {
                    skipWait = r;
                    setTimeout(r, getDuration(line));
                });

                textDisplay.classList.remove('visible');
                
                await new Promise(r => {
                    skipWait = r;
                    setTimeout(r, 1500);
                });
            }

            introContainer.style.opacity = '0';
            setTimeout(() => {
                introContainer.style.display = 'none';
                showQuestion();
            }, 1000);
        }

        function showQuestion() {
            questionCard.style.display = 'flex';
        }

        // --- 4. Heart Ripple Effect ---
        document.addEventListener('click', (e) => {
            if(successMessage.style.display === 'block') return;

            const heart = document.createElement('div');
            heart.classList.add('heart-ripple');
            heart.style.left = `${e.clientX}px`;
            heart.style.top = `${e.clientY}px`;
            document.body.appendChild(heart);

            setTimeout(() => {
                heart.remove();
            }, 800);
        });

        // --- 5. Runaway Logic + Hand Feature ---
        let escaped = false;
        let runCount = 0; // Counter for the hand feature

        function runAway() {
            // If the hand already took it, do nothing
            if (noBtn.style.display === 'none') return;

            runCount++;

            // --- Trigger Hand Feature at 20 moves ---
            if (runCount >= 20) {
                triggerHand();
                return;
            }

            if (!escaped) {
                noBtn.style.position = 'fixed';
                noBtn.style.margin = '0';
                noBtn.style.transform = 'none';
                noBtn.style.zIndex = '9999';
                document.body.appendChild(noBtn);
                escaped = true;
            }

            const btnWidthPercent = (noBtn.offsetWidth / window.innerWidth) * 100;
            const btnHeightPercent = (noBtn.offsetHeight / window.innerHeight) * 100;

            const minPadding = 5; 
            const maxPercentX = 100 - btnWidthPercent - minPadding;
            const maxPercentY = 100 - btnHeightPercent - minPadding;

            const randomX = Math.random() * (maxPercentX - minPadding) + minPadding;
            const randomY = Math.random() * (maxPercentY - minPadding) + minPadding;

            noBtn.style.left = `${randomX}%`;
            noBtn.style.top = `${randomY}%`;

            updateTaunt();
        }

        function triggerHand() {
            // Update Text
            tauntText.innerText = "That's it, I'm getting that button!";
            
            // Get current button position
            const rect = noBtn.getBoundingClientRect();
            const btnCenterX = rect.left + rect.width / 2;
            const btnCenterY = rect.top + rect.height / 2;

            // Create Hand
            const hand = document.createElement('div');
            hand.classList.add('hand-emoji');
            hand.innerText = '‚úã'; // Hand emoji
            hand.style.top = `${btnCenterY - 40}px`; // Center vertically roughly
            hand.style.left = '-150px'; // Start off screen left
            document.body.appendChild(hand);

            // 1. Slide Hand to Button
            setTimeout(() => {
                hand.style.left = `${btnCenterX - 80}px`; // Position slightly to the left of button
                
                // 2. "Grab" animation (Both move right)
                setTimeout(() => {
                    const offScreenRight = window.innerWidth + 200;
                    
                    // Change hand to "grabbing" look maybe? No, keep simple.
                    // Move both off screen
                    hand.style.transition = 'left 1s ease-in';
                    hand.style.left = `${offScreenRight}px`;
                    
                    noBtn.style.transition = 'left 1s ease-in, top 1s ease-in';
                    noBtn.style.left = `${offScreenRight}px`;
                    noBtn.style.top = `${btnCenterY - 25}px`; // Lock vertical movement

                    // 3. Cleanup
                    setTimeout(() => {
                        hand.remove();
                        noBtn.style.display = 'none';
                        tauntText.innerText = "Good riddance!";
                        tauntText.style.color = "#fff";
                        tauntText.style.fontWeight = "bold";
                    }, 1000);

                }, 800); // Wait for hand to arrive

            }, 50); // Slight delay for render
        }

        function updateTaunt() {
            const randomTaunt = tauntMessages[Math.floor(Math.random() * tauntMessages.length)];
            
            tauntText.style.opacity = '0';
            setTimeout(() => {
                tauntText.innerText = randomTaunt;
                tauntText.style.opacity = '1';
            }, 300);
        }

        noBtn.addEventListener('mouseenter', runAway);
        noBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            runAway();
        });
        noBtn.addEventListener('touchstart', (e) => {
            e.stopPropagation();
            e.preventDefault();
            runAway();
        });

        // --- 6. Success Logic ---
        yesBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            questionCard.style.display = 'none';
            noBtn.style.display = 'none';
            successMessage.style.display = 'block';
            createConfetti();
        });

        // --- 7. Confetti ---
        function createConfetti() {
            const colors = ['#ff9a9e', '#fad0c4', '#ffecd2', '#fcb69f', '#ffffff'];
            
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.style.position = 'fixed';
                confetti.style.left = '50%';
                confetti.style.top = '50%';
                const size = Math.random() * 10 + 5;
                confetti.style.width = size + 'px';
                confetti.style.height = size + 'px';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.borderRadius = '50%';
                confetti.style.zIndex = '100';
                document.body.appendChild(confetti);

                const destX = (Math.random() - 0.5) * window.innerWidth;
                const destY = (Math.random() - 0.5) * window.innerHeight;
                const rotate = Math.random() * 720;

                confetti.animate([
                    { transform: `translate(0,0) rotate(0deg)`, opacity: 1 },
                    { transform: `translate(${destX}px, ${destY}px) rotate(${rotate}deg)`, opacity: 0 }
                ], {
                    duration: 2000 + Math.random() * 1000,
                    easing: 'cubic-bezier(0.25, 1, 0.5, 1)',
                    fill: 'forwards'
                }).onfinish = () => confetti.remove();
            }
        }

        // Start
        window.onload = playIntro;

    </script>
</body>
</html>
